{"version":3,"sources":["webpack:///./src async","webpack:///./src/main.ts","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/principal.ts","webpack:///./src/environments/environment.ts","webpack:///./src/app/app.component.css","webpack:///./src/app/app.component.html"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["function webpackEmptyContext(req) {\n\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 196;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src async\n// module id = 196\n// module chunks = 1","import {enableProdMode} from \"@angular/core\";\nimport {platformBrowserDynamic} from \"@angular/platform-browser-dynamic\";\nimport {AppModule} from \"./app/app.module\";\nimport {environment} from \"./environments/environment\";\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts","import {Component} from \"@angular/core\";\nimport {Principal} from \"./principal\";\nimport {Response, RequestOptions, Headers, Http} from \"@angular/http\";\nimport {Observable} from \"rxjs\";\nimport {NgForm} from \"@angular/forms\";\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  credentials = {\n    username: '',\n    password: ''\n  };\n\n  private username: String = '';\n  private password: String = '';\n\n  principal: Principal = new Principal(false, []);\n\n  loginFailed: boolean = false;\n\n  constructor(private http: Http){}\n\n  ngOnInit(): void {\n\n  }\n\n  onLogin(form: NgForm) {\n    this.loginFailed = false;\n    let headers = new Headers({'Content-Type': 'application/json'});\n    this.username = form.value.username;\n    this.password = form.value.password;\n\n    headers.append('Authorization','Basic ' + btoa(form.value.username + ':' + form.value.password));\n    headers.append('X-Requested-With','XMLHttpRequest');\n    let options = new RequestOptions({headers: headers});\n    this.http.get(\"/me\", options)\n      .map((response: Response) => response.json())\n      .catch((error: Response) => {\n        if (error.status === 401) {\n          this.loginFailed = true;\n        }\n        console.log(error);\n        return Observable.throw(error);\n      })\n      .map((data: any) => new Principal(data.authenticated, data.authorities))\n      .subscribe((principal: Principal) => {\n        console.log(principal);\n        this.principal = principal;\n      });\n  }\n\n  onLogout() {\n    let headers = new Headers({'Content-Type': 'application/json'});\n    headers.append('Authorization','Basic ' + btoa(this.username + ':' + this.password));\n    headers.append('X-Requested-With','XMLHttpRequest');\n    let options = new RequestOptions({headers: headers});\n    this.http.post(\"/logout\", '', options)\n      .catch((error: Response) => {\n        console.log(error);\n        return Observable.throw(error);\n      })\n      .subscribe((response: Response) => {\n        if (response.status === 204) {\n          this.loginFailed = false;\n          this.credentials.username = '';\n          this.credentials.password = '';\n          this.principal = new Principal(false, []);\n        }\n      });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import {BrowserModule} from \"@angular/platform-browser\";\nimport {NgModule} from \"@angular/core\";\nimport {FormsModule} from \"@angular/forms\";\nimport {HttpModule} from \"@angular/http\";\nimport {AppComponent} from \"./app.component\";\nimport {NgbModule} from \"@ng-bootstrap/ng-bootstrap\";\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule,\n    HttpModule,\n    NgbModule.forRoot()\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","/**\r\n * Created by tschi on 4/16/2017.\r\n */\r\nexport class Principal {\r\n  public authenticated: boolean;\r\n  public authorities: Authority[] = [];\r\n\r\n  constructor(authenticated: boolean, authorities: any[]) {\r\n    this.authenticated = authenticated;\r\n    authorities.map(auth => this.authorities.push(new Authority(auth.authority)))\r\n  }\r\n\r\n  isAdmin() {\r\n    return this.authorities.some((auth: Authority) => auth.authority.indexOf('ADMIN') > -1)\r\n  }\r\n}\r\n\r\nexport class Authority {\r\n  public authority: String;\r\n\r\n  constructor(authority: String) {\r\n    this.authority = authority;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/principal.ts","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/environments/environment.ts","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.css\n// module id = 265\n// module chunks = 1","module.exports = \"<nav class=\\\"navbar navbar-toggleable-md navbar-inverse fixed-top bg-inverse\\\">\\n  <button class=\\\"navbar-toggler navbar-toggler-right\\\" type=\\\"button\\\" data-toggle=\\\"collapse\\\" data-target=\\\"#navbarCollapse\\\" aria-controls=\\\"navbarCollapse\\\" aria-expanded=\\\"false\\\" aria-label=\\\"Toggle navigation\\\">\\n    <span class=\\\"navbar-toggler-icon\\\"></span>\\n  </button>\\n  <a class=\\\"navbar-brand\\\" href=\\\"#\\\">Book Rater</a>\\n  <div class=\\\"collapse navbar-collapse\\\" id=\\\"navbarCollapse\\\">\\n    <ul class=\\\"navbar-nav mr-auto\\\">\\n    </ul>\\n    <div *ngIf=\\\"!principal.authenticated; then loginForm else loginMessage\\\"></div>\\n    <ng-template #loginForm>\\n      <form (ngSubmit)=\\\"onLogin(f)\\\" class=\\\"form-inline mt-2 mt-md-0\\\" #f=\\\"ngForm\\\">\\n        <input name=\\\"username\\\" [(ngModel)]=\\\"credentials.username\\\" required class=\\\"form-control mr-sm-2\\\" type=\\\"text\\\" placeholder=\\\"Username\\\">\\n        <input name=\\\"password\\\" [(ngModel)]=\\\"credentials.password\\\" required class=\\\"form-control mr-sm-2\\\" type=\\\"password\\\" placeholder=\\\"Password\\\">\\n        <button class=\\\"btn btn-outline-success my-2 my-sm-0\\\" type=\\\"submit\\\" [disabled]=\\\"!f.valid\\\">Login</button>\\n      </form>\\n    </ng-template>\\n    <ng-template #loginMessage>\\n      <button type=\\\"button\\\" class=\\\"btn btn-link\\\" (click)=\\\"onLogout()\\\">Logout</button>\\n    </ng-template>\\n    <div *ngIf=\\\"loginFailed\\\">\\n      <div class=\\\"alert alert-warning\\\">Login Failed</div>\\n    </div>\\n\\n  </div>\\n</nav>\\n\\n<div class=\\\"container\\\">\\n  <div class=\\\"jumbotron\\\">\\n    <h1>Book Rater App</h1>\\n    <p class=\\\"lead\\\">Keep track of all the latest books and their ratings.</p>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.html\n// module id = 267\n// module chunks = 1"],"sourceRoot":""}